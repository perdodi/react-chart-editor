{"version":3,"sources":["../../../../src/components/widgets/text_editors/LaTeX.js"],"names":["LaTeX","props","unwrappedValue","unwrap","value","state","onChange","bind","onBlur","nextProps","unwrappedNextValue","setState","substr","length","e","target","wrap","className","editorClassNames","placeholder","TextArea","propTypes","PropTypes","string","func","isRequired","defaultProps"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;IAEqBA,K;;;;;AACnB,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+EAAMA,KAAN,GADiB,CAGjB;AACA;;AACA,QAAMC,cAAc,GAAG,MAAKC,MAAL,CAAYF,KAAK,CAACG,KAAlB,CAAvB;;AAEA,UAAKC,KAAL,GAAa;AACXD,MAAAA,KAAK,EAAEF;AADI,KAAb;AAGA,UAAKI,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB;AACA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYD,IAAZ,+BAAd;AAXiB;AAYlB;;;;8CAEyBE,S,EAAW;AACnC,UAAMC,kBAAkB,GAAG,KAAKP,MAAL,CAAYM,SAAS,CAACL,KAAtB,CAA3B;;AAEA,UAAIM,kBAAkB,KAAK,KAAKL,KAAL,CAAWD,KAAtC,EAA6C;AAC3C,aAAKO,QAAL,CAAc;AACZP,UAAAA,KAAK,EAAEM;AADK,SAAd;AAGD;AACF,K,CAED;;;;2BACON,K,EAAO;AACZ,UAAI,iCAAUA,KAAV,CAAJ,EAAsB;AACpB,eAAOA,KAAK,CAACQ,MAAN,CAAa,CAAb,EAAgBR,KAAK,CAACS,MAAN,GAAe,CAA/B,CAAP;AACD;;AAED,aAAOT,KAAP;AACD,K,CAED;;;;yBACKA,K,EAAO;AACV,UAAI,CAAC,iCAAUA,KAAV,CAAL,EAAuB;AACrB,0BAAWA,KAAX;AACD;;AAED,aAAOA,KAAP;AACD;;;6BAEQU,C,EAAG;AACV,WAAKH,QAAL,CAAc;AACZP,QAAAA,KAAK,EAAEU,CAAC,CAACC,MAAF,CAASX;AADJ,OAAd;AAGD;;;2BAEMU,C,EAAG;AACR,UAAMV,KAAK,GAAG,KAAKY,IAAL,CAAUF,CAAC,CAACC,MAAF,CAASX,KAAnB,CAAd;AACA,WAAKH,KAAL,CAAWK,QAAX,CAAoBF,KAApB;AACD;;;6BAEQ;AAAA,UACAa,SADA,GACa,KAAKhB,KADlB,CACAgB,SADA;AAEP,UAAMC,gBAAgB,GAAGD,SAAS,GAAGA,SAAH,GAAe,oBAAjD;AACA,aACE;AACE,QAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWD,KADpB;AAEE,QAAA,WAAW,EAAE,KAAKH,KAAL,CAAWkB,WAF1B;AAGE,QAAA,QAAQ,EAAE,KAAKb,QAHjB;AAIE,QAAA,MAAM,EAAE,KAAKE,MAJf;AAKE,QAAA,SAAS,EAAEU;AALb,QADF;AASD;;;;EAlEgCE,kB;;;AAqEnCpB,KAAK,CAACqB,SAAN,GAAkB;AAChBJ,EAAAA,SAAS,EAAEK,mBAAUC,MADL;AAEhBjB,EAAAA,QAAQ,EAAEgB,mBAAUE,IAAV,CAAeC,UAFT;AAGhBN,EAAAA,WAAW,EAAEG,mBAAUC,MAHP;AAIhBnB,EAAAA,KAAK,EAAEkB,mBAAUC;AAJD,CAAlB;AAOAvB,KAAK,CAAC0B,YAAN,GAAqB;AACnBtB,EAAAA,KAAK,EAAE,EADY;AAEnBe,EAAAA,WAAW,EAAE;AAFM,CAArB","sourcesContent":["import React from 'react';\nimport TextArea from '../TextArea';\nimport PropTypes from 'prop-types';\n\nimport {isLaTeXExpr as isWrapped} from './convertFormats';\n\nexport default class LaTeX extends TextArea {\n  constructor(props) {\n    super(props);\n\n    // Internally, represesent the LaTeX document without the\n    // wrapping `$...$` characters.\n    const unwrappedValue = this.unwrap(props.value);\n\n    this.state = {\n      value: unwrappedValue,\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const unwrappedNextValue = this.unwrap(nextProps.value);\n\n    if (unwrappedNextValue !== this.state.value) {\n      this.setState({\n        value: unwrappedNextValue,\n      });\n    }\n  }\n\n  // Return a new value with wrapping `$...$` removed.\n  unwrap(value) {\n    if (isWrapped(value)) {\n      return value.substr(1, value.length - 2);\n    }\n\n    return value;\n  }\n\n  // Wrap value in `$...$`.\n  wrap(value) {\n    if (!isWrapped(value)) {\n      return `$${value}$`;\n    }\n\n    return value;\n  }\n\n  onChange(e) {\n    this.setState({\n      value: e.target.value,\n    });\n  }\n\n  onBlur(e) {\n    const value = this.wrap(e.target.value);\n    this.props.onChange(value);\n  }\n\n  render() {\n    const {className} = this.props;\n    const editorClassNames = className ? className : 'text-editor__latex';\n    return (\n      <textarea\n        value={this.state.value}\n        placeholder={this.props.placeholder}\n        onChange={this.onChange}\n        onBlur={this.onBlur}\n        className={editorClassNames}\n      />\n    );\n  }\n}\n\nLaTeX.propTypes = {\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.string,\n  value: PropTypes.string,\n};\n\nLaTeX.defaultProps = {\n  value: '',\n  placeholder: '',\n};\n"],"file":"LaTeX.js"}