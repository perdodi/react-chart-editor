{"version":3,"sources":["../../../src/components/fields/PieColorscalePicker.js"],"names":["UnconnectedPieColorscalePicker","props","onUpdate","bind","colorscale","colorscaleType","Array","isArray","numPieSlices","context","graphDiv","calcdata","length","adjustedColorscale","repeat","updatePlot","fullValue","Component","propTypes","PropTypes","any","func","Field","contextTypes","container","object","displayName","modifyPlotProps","plotProps","map","d","color","traceIndexes","isVisible"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA,8B;;;;;AACJ,0CAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,wGAAMA,KAAN;AACA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB;AAFiB;AAGlB;;;;6BAEQC,U,EAAYC,c,EAAgB;AACnC,UAAIC,KAAK,CAACC,OAAN,CAAcH,UAAd,CAAJ,EAA+B;AAC7B,YAAMI,YAAY,GAAG,KAAKC,OAAL,CAAaC,QAAb,CAAsBC,QAAtB,CAA+B,CAA/B,EAAkCC,MAAlC,GAA2C,CAAhE;AACA,YAAMC,kBAAkB,GAAG,2BAAiBT,UAAjB,EAA6BI,YAA7B,EAA2CH,cAA3C,EAA2D;AACpFS,UAAAA,MAAM,EAAE;AAD4E,SAA3D,CAA3B;AAGA,aAAKb,KAAL,CAAWc,UAAX,CAAsBF,kBAAtB;AACD;AACF;;;6BAEQ;AAAA,UACAG,SADA,GACa,KAAKf,KADlB,CACAe,SADA;AAEP,UAAMZ,UAAU,GAAGE,KAAK,CAACC,OAAN,CAAcS,SAAd,IAA2BA,SAA3B,GAAuC,IAA1D;AAEA,aACE,6BAAC,cAAD,EAAW,KAAKf,KAAhB,EACE,6BAAC,yBAAD;AACE,QAAA,QAAQ,EAAEG,UADZ;AAEE,QAAA,kBAAkB,EAAE,KAAKF,QAF3B;AAGE,QAAA,eAAe,EAAC;AAHlB,QADF,CADF;AASD;;;;EA7B0Ce,gB;;AAgC7CjB,8BAA8B,CAACkB,SAA/B;AACEF,EAAAA,SAAS,EAAEG,mBAAUC,GADvB;AAEEL,EAAAA,UAAU,EAAEI,mBAAUE;AAFxB,GAGKC,eAAMJ,SAHX;AAMAlB,8BAA8B,CAACuB,YAA/B,GAA8C;AAC5CC,EAAAA,SAAS,EAAEL,mBAAUM,MADuB;AAE5Cf,EAAAA,QAAQ,EAAES,mBAAUM;AAFwB,CAA9C;AAKAzB,8BAA8B,CAAC0B,WAA/B,GAA6C,gCAA7C;;eAEe,6BAAmB1B,8BAAnB,EAAmD;AAChE2B,EAAAA,eAAe,EAAE,yBAAC1B,KAAD,EAAQQ,OAAR,EAAiBmB,SAAjB,EAA+B;AAC9C,QACEnB,OAAO,IACPA,OAAO,CAACe,SADR,IAEAf,OAAO,CAACC,QAFR,KAGC,CAACkB,SAAS,CAACZ,SAAX,IACEV,KAAK,CAACC,OAAN,CAAcqB,SAAS,CAACZ,SAAxB,KAAsC,CAACY,SAAS,CAACZ,SAAV,CAAoBJ,MAJ9D,KAKAH,OAAO,CAACC,QAAR,CAAiBC,QANnB,EAOE;AACAiB,MAAAA,SAAS,CAACZ,SAAV,GAAsBP,OAAO,CAACC,QAAR,CAAiBC,QAAjB,CAA0B,CAA1B,EAA6BkB,GAA7B,CAAiC,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,KAAN;AAAA,OAAlC,CAAtB;AACD;;AAED,QAAItB,OAAO,CAACuB,YAAR,CAAqBpB,MAArB,GAA8B,CAAlC,EAAqC;AACnCgB,MAAAA,SAAS,CAACK,SAAV,GAAsB,KAAtB;AACD;AACF;AAhB+D,CAAnD,C","sourcesContent":["import ColorscalePickerWidget from '../widgets/ColorscalePicker';\nimport Field from './Field';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport {connectToContainer, adjustColorscale} from 'lib';\n\nclass UnconnectedPieColorscalePicker extends Component {\n  constructor(props) {\n    super(props);\n    this.onUpdate = this.onUpdate.bind(this);\n  }\n\n  onUpdate(colorscale, colorscaleType) {\n    if (Array.isArray(colorscale)) {\n      const numPieSlices = this.context.graphDiv.calcdata[0].length + 1;\n      const adjustedColorscale = adjustColorscale(colorscale, numPieSlices, colorscaleType, {\n        repeat: true,\n      });\n      this.props.updatePlot(adjustedColorscale);\n    }\n  }\n\n  render() {\n    const {fullValue} = this.props;\n    const colorscale = Array.isArray(fullValue) ? fullValue : null;\n\n    return (\n      <Field {...this.props}>\n        <ColorscalePickerWidget\n          selected={colorscale}\n          onColorscaleChange={this.onUpdate}\n          initialCategory=\"categorical\"\n        />\n      </Field>\n    );\n  }\n}\n\nUnconnectedPieColorscalePicker.propTypes = {\n  fullValue: PropTypes.any,\n  updatePlot: PropTypes.func,\n  ...Field.propTypes,\n};\n\nUnconnectedPieColorscalePicker.contextTypes = {\n  container: PropTypes.object,\n  graphDiv: PropTypes.object,\n};\n\nUnconnectedPieColorscalePicker.displayName = 'UnconnectedPieColorscalePicker';\n\nexport default connectToContainer(UnconnectedPieColorscalePicker, {\n  modifyPlotProps: (props, context, plotProps) => {\n    if (\n      context &&\n      context.container &&\n      context.graphDiv &&\n      (!plotProps.fullValue ||\n        (Array.isArray(plotProps.fullValue) && !plotProps.fullValue.length)) &&\n      context.graphDiv.calcdata\n    ) {\n      plotProps.fullValue = context.graphDiv.calcdata[0].map(d => d.color);\n    }\n\n    if (context.traceIndexes.length > 1) {\n      plotProps.isVisible = false;\n    }\n  },\n});\n"],"file":"PieColorscalePicker.js"}