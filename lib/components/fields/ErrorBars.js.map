{"version":3,"sources":["../../../src/components/fields/ErrorBars.js"],"names":["ErrorBars","props","context","updatePlot","bind","value","fullValue","visible","symmetric","mode","_","localize","getMode","label","showCustomDataControl","type","styleAttrs","attr","renderModeSelector","renderErrorBarControls","Component","propTypes","PropTypes","string","object","func","contextTypes"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport {DataSelector, Radio, Numeric, MultiColorPicker} from '../index';\nimport RadioBlocks from '../widgets/RadioBlocks';\nimport Field from './Field';\nimport {connectToContainer} from 'lib';\n\nclass ErrorBars extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.updatePlot = this.updatePlot.bind(this);\n  }\n\n  updatePlot(value) {\n    if (value === 'symmetric') {\n      this.props.updatePlot({\n        ...this.props.fullValue,\n        visible: true,\n        symmetric: true,\n      });\n    }\n\n    if (value === 'asymmetric') {\n      this.props.updatePlot({\n        ...this.props.fullValue,\n        visible: true,\n        symmetric: false,\n      });\n    }\n\n    if (value === 'hidden') {\n      this.props.updatePlot({\n        ...this.props.fullValue,\n        visible: false,\n      });\n    }\n  }\n\n  getMode() {\n    let mode;\n\n    if (!this.props.fullValue.visible) {\n      mode = 'hidden';\n    }\n\n    if (\n      this.props.fullValue.visible &&\n      (this.props.fullValue.symmetric || typeof this.props.fullValue.symmetric === 'undefined')\n    ) {\n      // when this.props.fullValue.type === 'sqrt',\n      // then this.props.fullValue.symmetric is undefined, but 'sqrt' is only\n      // applicable when we want symmetric error bars\n      // https://github.com/plotly/plotly.js/issues/2359\n      mode = 'symmetric';\n    }\n\n    if (this.props.fullValue.visible && this.props.fullValue.symmetric === false) {\n      // it has to be explicitly set to false, because we don't want it to catch\n      // cases when it's undefined\n      mode = 'asymmetric';\n    }\n\n    return mode;\n  }\n\n  renderModeSelector() {\n    const {localize: _} = this.context;\n\n    return (\n      <Field>\n        <RadioBlocks\n          alignment=\"center\"\n          onOptionChange={this.updatePlot}\n          activeOption={this.getMode()}\n          options={[\n            {label: _('None'), value: 'hidden'},\n            {label: _('Symmetric'), value: 'symmetric'},\n            {label: _('Asymmetric'), value: 'asymmetric'},\n          ]}\n        />\n      </Field>\n    );\n  }\n\n  renderErrorBarControls() {\n    const {localize: _} = this.context;\n    const mode = this.getMode();\n    const showCustomDataControl = this.props.fullValue.type === 'data';\n\n    const styleAttrs = (\n      <>\n        <Radio\n          label={_('Copy Y Style')}\n          attr={`${this.props.attr}.copy_ystyle`}\n          options={[\n            {label: _('Yes'), value: true},\n            {label: _('No'), value: false},\n          ]}\n        />\n        <Radio\n          label={_('Copy Z Style')}\n          attr={`${this.props.attr}.copy_zstyle`}\n          options={[\n            {label: _('Yes'), value: true},\n            {label: _('No'), value: false},\n          ]}\n        />\n        <MultiColorPicker label={_('Color')} attr={`${this.props.attr}.color`} />\n        <Numeric label={_('Thickness')} attr={`${this.props.attr}.thickness`} />\n        <Numeric label={_('Crossbar Width')} attr={`${this.props.attr}.width`} />\n      </>\n    );\n\n    if (mode === 'symmetric') {\n      return (\n        <>\n          <Radio\n            label={_('Error Type')}\n            attr={`${this.props.attr}.type`}\n            options={[\n              {label: _('%'), value: 'percent'},\n              {label: _('Constant'), value: 'constant'},\n              {label: _('âˆš'), value: 'sqrt'},\n              {label: _('Data'), value: 'data'},\n            ]}\n          />\n          <Numeric label={_('Value')} attr={`${this.props.attr}.value`} />\n          {showCustomDataControl ? (\n            <DataSelector label={_('Custom Data')} attr={`${this.props.attr}.array`} />\n          ) : null}\n          {styleAttrs}\n        </>\n      );\n    }\n\n    if (mode === 'asymmetric') {\n      return (\n        <>\n          <Radio\n            label={_('Error Type')}\n            attr={`${this.props.attr}.type`}\n            options={[\n              {label: _('%'), value: 'percent'},\n              {label: _('Constant'), value: 'constant'},\n              {label: _('Data'), value: 'data'},\n            ]}\n          />\n          <Numeric label={_('Value')} attr={`${this.props.attr}.value`} />\n          <Numeric label={_('Value (-)')} attr={`${this.props.attr}.valueminus`} />\n          {showCustomDataControl ? (\n            <>\n              <DataSelector label={_('Error (+)')} attr={`${this.props.attr}.array`} />\n              <DataSelector label={_('Error (-)')} attr={`${this.props.attr}.arrayminus`} />\n            </>\n          ) : null}\n          {styleAttrs}\n        </>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <>\n        {this.renderModeSelector()}\n        {this.renderErrorBarControls()}\n      </>\n    );\n  }\n}\n\nErrorBars.propTypes = {\n  attr: PropTypes.string,\n  fullValue: PropTypes.object,\n  updatePlot: PropTypes.func,\n};\n\nErrorBars.contextTypes = {\n  localize: PropTypes.func,\n};\n\nexport default connectToContainer(ErrorBars);\n"],"file":"ErrorBars.js"}