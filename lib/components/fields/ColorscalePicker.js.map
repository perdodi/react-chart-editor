{"version":3,"sources":["../../../src/components/fields/ColorscalePicker.js"],"names":["UnconnectedColorscalePicker","onUpdate","bind","colorscale","colorscaleType","Array","isArray","props","updatePlot","map","c","i","step","length","context","type","EDITOR_ACTIONS","UPDATE_TRACES","payload","update","autocolorscale","traceIndexes","fullContainer","index","fullValue","v","initialCategory","disableCategorySwitch","Component","propTypes","labelWidth","PropTypes","number","any","object","func","string","Field","contextTypes","container","graphDiv","displayName"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEaA,2B;;;;;AACX,yCAAc;AAAA;;AAAA;;AACZ;AACA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB;AAFY;AAGb;;;;6BAEQC,U,EAAYC,c,EAAgB;AACnC,UAAIC,KAAK,CAACC,OAAN,CAAcH,UAAd,CAAJ,EAA+B;AAC7B,aAAKI,KAAL,CAAWC,UAAX,CACEL,UAAU,CAACM,GAAX,CAAe,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACvB,cAAIC,IAAI,GAAGD,CAAC,IAAIR,UAAU,CAACU,MAAX,GAAoB,CAAxB,CAAZ;;AACA,cAAIF,CAAC,KAAK,CAAV,EAAa;AACXC,YAAAA,IAAI,GAAG,CAAP;AACD;;AACD,iBAAO,CAACA,IAAD,EAAOF,CAAP,CAAP;AACD,SAND,CADF,EAQEN,cARF;AAUA,aAAKU,OAAL,CAAab,QAAb,CAAsB;AACpBc,UAAAA,IAAI,EAAEC,0BAAeC,aADD;AAEpBC,UAAAA,OAAO,EAAE;AACPC,YAAAA,MAAM,EAAE;AAACC,cAAAA,cAAc,EAAE;AAAjB,aADD;AAEPC,YAAAA,YAAY,EAAE,CAAC,KAAKd,KAAL,CAAWe,aAAX,CAAyBC,KAA1B;AAFP;AAFW,SAAtB;AAOD;AACF;;;6BAEQ;AAAA,UACAC,SADA,GACa,KAAKjB,KADlB,CACAiB,SADA;AAEP,UAAMrB,UAAU,GAAGE,KAAK,CAACC,OAAN,CAAckB,SAAd,IAA2BA,SAAS,CAACf,GAAV,CAAc,UAAAgB,CAAC;AAAA,eAAIA,CAAC,CAAC,CAAD,CAAL;AAAA,OAAf,CAA3B,GAAsD,IAAzE;AAEA,aACE,6BAAC,cAAD,eAAW,KAAKlB,KAAhB;AAAuB,QAAA,uBAAuB,EAAC;AAA/C,UACE,6BAAC,yBAAD;AACE,QAAA,QAAQ,EAAEJ,UADZ;AAEE,QAAA,kBAAkB,EAAE,KAAKF,QAF3B;AAGE,QAAA,eAAe,EAAE,KAAKM,KAAL,CAAWmB,eAH9B;AAIE,QAAA,qBAAqB,EAAE,KAAKnB,KAAL,CAAWoB;AAJpC,QADF,CADF;AAUD;;;;EA1C8CC,gB;;;AA6CjD5B,2BAA2B,CAAC6B,SAA5B;AACEC,EAAAA,UAAU,EAAEC,mBAAUC,MADxB;AAEER,EAAAA,SAAS,EAAEO,mBAAUE,GAFvB;AAGEX,EAAAA,aAAa,EAAES,mBAAUG,MAH3B;AAIE1B,EAAAA,UAAU,EAAEuB,mBAAUI,IAJxB;AAKET,EAAAA,eAAe,EAAEK,mBAAUK;AAL7B,GAMKC,eAAMR,SANX;AASA7B,2BAA2B,CAACsC,YAA5B,GAA2C;AACzCC,EAAAA,SAAS,EAAER,mBAAUG,MADoB;AAEzCM,EAAAA,QAAQ,EAAET,mBAAUG,MAFqB;AAGzCjC,EAAAA,QAAQ,EAAE8B,mBAAUI;AAHqB,CAA3C;AAMAnC,2BAA2B,CAACyC,WAA5B,GAA0C,6BAA1C;;eAEe,6BAAmBzC,2BAAnB,C","sourcesContent":["import ColorscalePickerWidget from '../widgets/ColorscalePicker';\nimport Field from './Field';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport {connectToContainer} from 'lib';\nimport {EDITOR_ACTIONS} from 'lib/constants';\n\nexport class UnconnectedColorscalePicker extends Component {\n  constructor() {\n    super();\n    this.onUpdate = this.onUpdate.bind(this);\n  }\n\n  onUpdate(colorscale, colorscaleType) {\n    if (Array.isArray(colorscale)) {\n      this.props.updatePlot(\n        colorscale.map((c, i) => {\n          let step = i / (colorscale.length - 1);\n          if (i === 0) {\n            step = 0;\n          }\n          return [step, c];\n        }),\n        colorscaleType\n      );\n      this.context.onUpdate({\n        type: EDITOR_ACTIONS.UPDATE_TRACES,\n        payload: {\n          update: {autocolorscale: false},\n          traceIndexes: [this.props.fullContainer.index],\n        },\n      });\n    }\n  }\n\n  render() {\n    const {fullValue} = this.props;\n    const colorscale = Array.isArray(fullValue) ? fullValue.map(v => v[1]) : null;\n\n    return (\n      <Field {...this.props} fieldContainerClassName=\"field__colorscale\">\n        <ColorscalePickerWidget\n          selected={colorscale}\n          onColorscaleChange={this.onUpdate}\n          initialCategory={this.props.initialCategory}\n          disableCategorySwitch={this.props.disableCategorySwitch}\n        />\n      </Field>\n    );\n  }\n}\n\nUnconnectedColorscalePicker.propTypes = {\n  labelWidth: PropTypes.number,\n  fullValue: PropTypes.any,\n  fullContainer: PropTypes.object,\n  updatePlot: PropTypes.func,\n  initialCategory: PropTypes.string,\n  ...Field.propTypes,\n};\n\nUnconnectedColorscalePicker.contextTypes = {\n  container: PropTypes.object,\n  graphDiv: PropTypes.object,\n  onUpdate: PropTypes.func,\n};\n\nUnconnectedColorscalePicker.displayName = 'UnconnectedColorscalePicker';\n\nexport default connectToContainer(UnconnectedColorscalePicker);\n"],"file":"ColorscalePicker.js"}