{"version":3,"sources":["../../../src/components/containers/AnnotationAccordion.js"],"names":["AnnotationFold","PlotlyFold","AnnotationAccordion","context","layout","annotations","meta","_","localize","props","canAdd","children","canReorder","content","length","map","ann","i","text","addAction","label","handler","updateContainer","annotationIndex","Array","isArray","key","value","Component","contextTypes","PropTypes","object","func","propTypes","node","bool"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,cAAc,GAAG,oCAA0BC,mBAA1B,CAAvB;;IAEMC,mB;;;;;;;;;;;;;6BACK;AAAA,0BAIH,KAAKC,OAJF;AAAA,+CAELC,MAFK;AAAA,uDAEIC,WAFJ;AAAA,UAEIA,WAFJ,sCAEkB,EAFlB;AAAA,wDAEsBC,IAFtB;AAAA,UAEsBA,IAFtB,uCAE6B,EAF7B;AAAA,UAGKC,CAHL,iBAGLC,QAHK;AAAA,wBAKgC,KAAKC,KALrC;AAAA,UAKAC,MALA,eAKAA,MALA;AAAA,UAKQC,QALR,eAKQA,QALR;AAAA,UAKkBC,UALlB,eAKkBA,UALlB;AAOP,UAAMC,OAAO,GACXR,WAAW,CAACS,MAAZ,IACAT,WAAW,CAACU,GAAZ,CAAgB,UAACC,GAAD,EAAMC,CAAN,EAAY;AAC1B,eACE,6BAAC,cAAD;AACE,UAAA,GAAG,EAAEA,CADP;AAEE,UAAA,eAAe,EAAEA,CAFnB;AAGE,UAAA,IAAI,EAAE,kCAAwBD,GAAG,CAACE,IAA5B,EAAkC;AAACZ,YAAAA,IAAI,EAAJA;AAAD,WAAlC,CAHR;AAIE,UAAA,SAAS,EAAEI;AAJb,WAMGC,QANH,CADF;AAUD,OAXD,CAFF;AAeA,UAAMQ,SAAS,GAAG;AAChBC,QAAAA,KAAK,EAAEb,CAAC,CAAC,YAAD,CADQ;AAEhBc,QAAAA,OAAO,EAAE,uBAA+B;AAAA,cAA7BjB,MAA6B,QAA7BA,MAA6B;AAAA,cAArBkB,eAAqB,QAArBA,eAAqB;AACtC,cAAIC,eAAJ;;AACA,cAAIC,KAAK,CAACC,OAAN,CAAcrB,MAAM,CAACC,WAArB,CAAJ,EAAuC;AACrCkB,YAAAA,eAAe,GAAGnB,MAAM,CAACC,WAAP,CAAmBS,MAArC;AACD,WAFD,MAEO;AACLS,YAAAA,eAAe,GAAG,CAAlB;AACD;;AAED,cAAMG,GAAG,yBAAkBH,eAAlB,MAAT;AACA,cAAMI,KAAK,GAAG;AAACT,YAAAA,IAAI,EAAEX,CAAC,CAAC,UAAD;AAAR,WAAd;;AAEA,cAAIe,eAAJ,EAAqB;AACnBA,YAAAA,eAAe,qBAAGI,GAAH,EAASC,KAAT,EAAf;AACD;AACF;AAhBe,OAAlB;AAmBA,aACE,6BAAC,oBAAD;AAAa,QAAA,SAAS,EAAEjB,MAAM,GAAGS,SAAH,GAAe,IAA7C;AAAmD,QAAA,UAAU,EAAEP;AAA/D,SACGC,OAAO,GACNA,OADM,GAGN,6BAAC,wBAAD;AAAc,QAAA,OAAO,EAAEN,CAAC,CAAC,qBAAD;AAAxB,SACE,wCACGA,CAAC,CACA,yFADA,CADJ,CADF,EAME,wCAAIA,CAAC,CAAC,mDAAD,CAAL,CANF,CAJJ,CADF;AAgBD;;;;EA1D+BqB,gB;;AA6DlC1B,mBAAmB,CAAC2B,YAApB,GAAmC;AACjCzB,EAAAA,MAAM,EAAE0B,mBAAUC,MADe;AAEjCvB,EAAAA,QAAQ,EAAEsB,mBAAUE;AAFa,CAAnC;AAKA9B,mBAAmB,CAAC+B,SAApB,GAAgC;AAC9BtB,EAAAA,QAAQ,EAAEmB,mBAAUI,IADU;AAE9BxB,EAAAA,MAAM,EAAEoB,mBAAUK,IAFY;AAG9BvB,EAAAA,UAAU,EAAEkB,mBAAUK;AAHQ,CAAhC;eAMejC,mB","sourcesContent":["import PlotlyFold from './PlotlyFold';\nimport {LayoutPanel} from './derived';\nimport {PanelMessage} from './PanelEmpty';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport {connectAnnotationToLayout, getParsedTemplateString} from 'lib';\n\nconst AnnotationFold = connectAnnotationToLayout(PlotlyFold);\n\nclass AnnotationAccordion extends Component {\n  render() {\n    const {\n      layout: {annotations = [], meta = []},\n      localize: _,\n    } = this.context;\n    const {canAdd, children, canReorder} = this.props;\n\n    const content =\n      annotations.length &&\n      annotations.map((ann, i) => {\n        return (\n          <AnnotationFold\n            key={i}\n            annotationIndex={i}\n            name={getParsedTemplateString(ann.text, {meta})}\n            canDelete={canAdd}\n          >\n            {children}\n          </AnnotationFold>\n        );\n      });\n\n    const addAction = {\n      label: _('Annotation'),\n      handler: ({layout, updateContainer}) => {\n        let annotationIndex;\n        if (Array.isArray(layout.annotations)) {\n          annotationIndex = layout.annotations.length;\n        } else {\n          annotationIndex = 0;\n        }\n\n        const key = `annotations[${annotationIndex}]`;\n        const value = {text: _('new text')};\n\n        if (updateContainer) {\n          updateContainer({[key]: value});\n        }\n      },\n    };\n\n    return (\n      <LayoutPanel addAction={canAdd ? addAction : null} canReorder={canReorder}>\n        {content ? (\n          content\n        ) : (\n          <PanelMessage heading={_('Call out your data.')}>\n            <p>\n              {_(\n                'Annotations are text and arrows you can use to point out specific parts of your figure.'\n              )}\n            </p>\n            <p>{_('Click on the + button above to add an annotation.')}</p>\n          </PanelMessage>\n        )}\n      </LayoutPanel>\n    );\n  }\n}\n\nAnnotationAccordion.contextTypes = {\n  layout: PropTypes.object,\n  localize: PropTypes.func,\n};\n\nAnnotationAccordion.propTypes = {\n  children: PropTypes.node,\n  canAdd: PropTypes.bool,\n  canReorder: PropTypes.bool,\n};\n\nexport default AnnotationAccordion;\n"],"file":"AnnotationAccordion.js"}