{"version":3,"sources":["../../../src/components/containers/ModalProvider.js"],"names":["ModalProvider","props","state","component","componentProps","open","isAnimatingOut","body","document","hasClass","classList","contains","add","remove","_","context","localize","Error","setState","animationDuration","setTimeout","closeModal","openModal","c","p","handleClose","Component","children","React","propTypes","PropTypes","node","contextTypes","func","childContextTypes","bool"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass ModalProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      component: null,\n      componentProps: {},\n      open: false,\n      isAnimatingOut: false,\n    };\n  }\n\n  componentDidUpdate() {\n    const body = document.body;\n    const {open} = this.state;\n\n    // Toggle scroll on document body if modal is open\n    const hasClass = body.classList.contains('no-scroll');\n\n    if (open && !hasClass) {\n      body.classList.add('no-scroll');\n    }\n    if (!open && hasClass) {\n      body.classList.remove('no-scroll');\n    }\n  }\n\n  openModal(component, componentProps) {\n    const {localize: _} = this.context;\n    if (!component) {\n      throw Error(_('You need to provide a component for the modal to open!'));\n    }\n    const {open} = this.state;\n\n    if (!open) {\n      this.setState({\n        component: component,\n        componentProps: componentProps,\n        open: true,\n      });\n    }\n  }\n\n  closeModal() {\n    const {open} = this.state;\n    if (open) {\n      this.setState({\n        open: false,\n        component: null,\n      });\n    }\n  }\n  handleClose() {\n    this.setState({isAnimatingOut: true});\n    const animationDuration = 600;\n    setTimeout(() => {\n      this.setState({isAnimatingOut: false});\n      this.closeModal();\n    }, animationDuration);\n  }\n\n  getChildContext() {\n    return {\n      openModal: (c, p) => this.openModal(c, p),\n      closeModal: () => this.closeModal(),\n      handleClose: () => this.handleClose(),\n      isAnimatingOut: this.state.isAnimatingOut,\n    };\n  }\n\n  render() {\n    const {component: Component, componentProps, isAnimatingOut} = this.state;\n    return (\n      <>\n        {this.props.children}\n        {this.state.open ? <Component isAnimatingOut={isAnimatingOut} {...componentProps} /> : null}\n      </>\n    );\n  }\n}\n\nModalProvider.propTypes = {\n  children: PropTypes.node,\n};\nModalProvider.contextTypes = {\n  localize: PropTypes.func,\n};\nModalProvider.childContextTypes = {\n  openModal: PropTypes.func,\n  closeModal: PropTypes.func,\n  handleClose: PropTypes.func,\n  isAnimatingOut: PropTypes.bool,\n};\n\nexport default ModalProvider;\n"],"file":"ModalProvider.js"}