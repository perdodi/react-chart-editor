{"version":3,"sources":["../../../src/components/containers/PlotlySection.js"],"names":["Section","sectionVisible","props","name","children","Component","plotly_editor_traits","no_visibility_forcing","propTypes","PropTypes","node","string","attr","PlotlySection","context","determineVisibility","nextProps","nextContext","isVisible","React","Children","forEach","child","plotProps","type","modifyPlotProps","displayName","contextTypes","containerConnectedContextTypes"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;IAMaA,O;;;;;AACX,qBAAc;AAAA;;AAAA;;AACZ;AACA,UAAKC,cAAL,GAAsB,IAAtB;AAFY;AAGb;;;;6BAEQ;AACP,UAAI,CAAC,KAAKA,cAAV,EAA0B;AACxB,eAAO,IAAP;AACD;;AAED,aACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACG,KAAKC,KAAL,CAAWC,IAAX,GACC;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAK,QAAA,SAAS,EAAC;AAAf,SAAyC,KAAKD,KAAL,CAAWC,IAApD,CADF,CADD,GAIG,IALN,EAMG,KAAKD,KAAL,CAAWE,QANd,CADF;AAUD;;;;EArB0BC,gB;;;AAwB7BL,OAAO,CAACM,oBAAR,GAA+B;AAACC,EAAAA,qBAAqB,EAAE;AAAxB,CAA/B;AACAP,OAAO,CAACQ,SAAR,GAAoB;AAClBJ,EAAAA,QAAQ,EAAEK,mBAAUC,IADF;AAElBP,EAAAA,IAAI,EAAEM,mBAAUE,MAFE;AAGlBC,EAAAA,IAAI,EAAEH,mBAAUE;AAHE,CAApB;;IAMqBE,a;;;;;AACnB,yBAAYX,KAAZ,EAAmBY,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,wFAAMZ,KAAN,EAAaY,OAAb;;AACA,WAAKC,mBAAL,CAAyBb,KAAzB,EAAgCY,OAAhC;;AAF0B;AAG3B;;;;8CAEyBE,S,EAAWC,W,EAAa;AAChD,WAAKF,mBAAL,CAAyBC,SAAzB,EAAoCC,WAApC;AACD;;;wCAEmBD,S,EAAWC,W,EAAa;AAAA;;AAAA,6BACtB,0BAAgBD,SAAhB,EAA2BC,WAA3B,CADsB;AAAA,UACnCC,SADmC,oBACnCA,SADmC;;AAE1C,WAAKjB,cAAL,GAAsB,qCAA2BiB,SAA3B,EAAsCF,SAAtC,EAAiDC,WAAjD,CAAtB;;AAEAE,qBAAMC,QAAN,CAAeC,OAAf,CAAuBL,SAAS,CAACZ,QAAjC,EAA2C,UAAAkB,KAAK,EAAI;AAClD,YAAI,CAACA,KAAD,IAAU,MAAI,CAACrB,cAAnB,EAAmC;AACjC;AACD;;AAED,YAAIqB,KAAK,CAACpB,KAAN,CAAYU,IAAhB,EAAsB;AACpB,cAAMW,SAAS,GAAG,0BAAgBD,KAAK,CAACpB,KAAtB,EAA6Be,WAA7B,CAAlB;;AACA,cAAIK,KAAK,CAACE,IAAN,CAAWC,eAAf,EAAgC;AAC9BH,YAAAA,KAAK,CAACE,IAAN,CAAWC,eAAX,CAA2BH,KAAK,CAACpB,KAAjC,EAAwCe,WAAxC,EAAqDM,SAArD;AACD;;AAED,UAAA,MAAI,CAACtB,cAAL,GAAsB,qCACpB,MAAI,CAACA,cAAL,IAAuBsB,SAAS,CAACL,SADb,EAEpBI,KAAK,CAACpB,KAFc,EAGpBe,WAHoB,EAIpBK,KAAK,CAACE,IAAN,IAAcF,KAAK,CAACE,IAAN,CAAWE,WAAzB,GAAuCJ,KAAK,CAACE,IAAN,CAAWE,WAAlD,GAAgE,IAJ5C,CAAtB;AAMA;AACD;;AAED,YAAI,CAAC,CAACJ,KAAK,CAACE,IAAN,CAAWlB,oBAAX,IAAmC,EAApC,EAAwCC,qBAA7C,EAAoE;AAClE;AACA,UAAA,MAAI,CAACN,cAAL,GAAsB,IAAtB;AACA;AACD;AACF,OAzBD;AA0BD;;;;EAxCwCD,O;;;AA2C3Ca,aAAa,CAACP,oBAAd,GAAqC;AAACC,EAAAA,qBAAqB,EAAE;AAAxB,CAArC;AACAM,aAAa,CAACc,YAAd,GAA6BC,mCAA7B","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  containerConnectedContextTypes,\n  unpackPlotProps,\n  isVisibleGivenCustomConfig,\n} from '../../lib';\n\nexport class Section extends Component {\n  constructor() {\n    super();\n    this.sectionVisible = true;\n  }\n\n  render() {\n    if (!this.sectionVisible) {\n      return null;\n    }\n\n    return (\n      <div className=\"section\">\n        {this.props.name ? (\n          <div className=\"section__heading\">\n            <div className=\"section__heading__text\">{this.props.name}</div>\n          </div>\n        ) : null}\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nSection.plotly_editor_traits = {no_visibility_forcing: false};\nSection.propTypes = {\n  children: PropTypes.node,\n  name: PropTypes.string,\n  attr: PropTypes.string,\n};\n\nexport default class PlotlySection extends Section {\n  constructor(props, context) {\n    super(props, context);\n    this.determineVisibility(props, context);\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this.determineVisibility(nextProps, nextContext);\n  }\n\n  determineVisibility(nextProps, nextContext) {\n    const {isVisible} = unpackPlotProps(nextProps, nextContext);\n    this.sectionVisible = isVisibleGivenCustomConfig(isVisible, nextProps, nextContext);\n\n    React.Children.forEach(nextProps.children, child => {\n      if (!child || this.sectionVisible) {\n        return;\n      }\n\n      if (child.props.attr) {\n        const plotProps = unpackPlotProps(child.props, nextContext);\n        if (child.type.modifyPlotProps) {\n          child.type.modifyPlotProps(child.props, nextContext, plotProps);\n        }\n\n        this.sectionVisible = isVisibleGivenCustomConfig(\n          this.sectionVisible || plotProps.isVisible,\n          child.props,\n          nextContext,\n          child.type && child.type.displayName ? child.type.displayName : null\n        );\n        return;\n      }\n\n      if (!(child.type.plotly_editor_traits || {}).no_visibility_forcing) {\n        // non-attr components force visibility (unless they don't via traits)\n        this.sectionVisible = true;\n        return;\n      }\n    });\n  }\n}\n\nPlotlySection.plotly_editor_traits = {no_visibility_forcing: true};\nPlotlySection.contextTypes = containerConnectedContextTypes;\n"],"file":"PlotlySection.js"}