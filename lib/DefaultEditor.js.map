{"version":3,"sources":["../src/DefaultEditor.js"],"names":["DefaultEditor","props","context","hasTransforms","bind","hasAxes","hasMenus","hasSliders","hasColorbars","hasLegend","fullData","some","d","TRANSFORMABLE_TRACES","includes","type","Object","keys","fullLayout","_subplots","filter","length","updatemenus","layout","sliders","t","showlegend","undefined","TRACE_TO_AXIS","geo","mapbox","_","localize","logo","logoSrc","menuPanelOrder","hasMaps","children","Component","propTypes","PropTypes","node","string","array","contextTypes","func","object"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {PanelMenuWrapper} from './components';\nimport {\n  GraphCreatePanel,\n  GraphTransformsPanel,\n  GraphSubplotsPanel,\n  StyleLayoutPanel,\n  StyleAxesPanel,\n  StyleMapsPanel,\n  StyleLegendPanel,\n  StyleNotesPanel,\n  StyleShapesPanel,\n  StyleSlidersPanel,\n  StyleImagesPanel,\n  StyleTracesPanel,\n  StyleColorbarsPanel,\n  StyleUpdateMenusPanel,\n} from './default_panels';\nimport {traceHasColorbar} from './default_panels/StyleColorbarsPanel';\nimport Logo from './components/widgets/Logo';\nimport {TRANSFORMABLE_TRACES, TRACE_TO_AXIS} from './lib/constants';\n\nclass DefaultEditor extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.hasTransforms = this.hasTransforms.bind(this);\n    this.hasAxes = this.hasAxes.bind(this);\n    this.hasMenus = this.hasMenus.bind(this);\n    this.hasSliders = this.hasSliders.bind(this);\n    this.hasColorbars = this.hasColorbars.bind(this);\n    this.hasLegend = this.hasLegend.bind(this);\n  }\n\n  hasTransforms() {\n    return this.context.fullData.some(d => TRANSFORMABLE_TRACES.includes(d.type));\n  }\n\n  hasAxes() {\n    return (\n      Object.keys(this.context.fullLayout._subplots).filter(\n        type =>\n          !['cartesian', 'mapbox'].includes(type) &&\n          this.context.fullLayout._subplots[type].length > 0\n      ).length > 0\n    );\n  }\n\n  hasMenus() {\n    const {\n      fullLayout: {updatemenus = []},\n    } = this.context;\n\n    return updatemenus.length > 0;\n  }\n\n  hasSliders() {\n    const {\n      layout: {sliders = []},\n    } = this.context;\n\n    return sliders.length > 0;\n  }\n\n  hasColorbars() {\n    return this.context.fullData.some(d => traceHasColorbar({}, d));\n  }\n\n  hasLegend() {\n    return this.context.fullData.some(t => t.showlegend !== undefined); // eslint-disable-line no-undefined\n  }\n\n  hasMaps() {\n    return this.context.fullData.some(d =>\n      [...TRACE_TO_AXIS.geo, ...TRACE_TO_AXIS.mapbox].includes(d.type)\n    );\n  }\n\n  render() {\n    const _ = this.context.localize;\n    const logo = this.props.logoSrc && <Logo src={this.props.logoSrc} />;\n\n    return (\n      <PanelMenuWrapper menuPanelOrder={this.props.menuPanelOrder}>\n        {logo ? logo : null}\n        <GraphCreatePanel group={_('Structure')} name={_('Traces')} />\n        <GraphSubplotsPanel group={_('Structure')} name={_('Subplots')} />\n        {this.hasTransforms() && (\n          <GraphTransformsPanel group={_('Structure')} name={_('Transforms')} />\n        )}\n        <StyleLayoutPanel group={_('Style')} name={_('General')} />\n        <StyleTracesPanel group={_('Style')} name={_('Traces')} />\n        {this.hasAxes() && <StyleAxesPanel group={_('Style')} name={_('Axes')} />}\n        {this.hasMaps() && <StyleMapsPanel group={_('Style')} name={_('Maps')} />}\n        {this.hasLegend() && <StyleLegendPanel group={_('Style')} name={_('Legend')} />}\n        {this.hasColorbars() && <StyleColorbarsPanel group={_('Style')} name={_('Color Bars')} />}\n        <StyleNotesPanel group={_('Annotate')} name={_('Text')} />\n        <StyleShapesPanel group={_('Annotate')} name={_('Shapes')} />\n        <StyleImagesPanel group={_('Annotate')} name={_('Images')} />\n        {this.hasSliders() && <StyleSlidersPanel group={_('Control')} name={_('Sliders')} />}\n        {this.hasMenus() && <StyleUpdateMenusPanel group={_('Control')} name={_('Menus')} />}\n        {this.props.children ? this.props.children : null}\n      </PanelMenuWrapper>\n    );\n  }\n}\n\nDefaultEditor.propTypes = {\n  children: PropTypes.node,\n  logoSrc: PropTypes.string,\n  menuPanelOrder: PropTypes.array,\n};\n\nDefaultEditor.contextTypes = {\n  localize: PropTypes.func,\n  fullData: PropTypes.array,\n  fullLayout: PropTypes.object,\n  layout: PropTypes.object,\n};\n\nexport default DefaultEditor;\n"],"file":"DefaultEditor.js"}